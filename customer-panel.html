<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Panel</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Customer Panel</h1>
        <p><a href="login.html" class="hero-button">Log Out</a></p> <!-- Link to log out (go to login page) -->
    </header>
    <div class="page-content">
        <h2>Welcome, Customer!</h2>
        <p>What would you like to do today?</p>

        <h3>Your Previous Orders</h3>
        <div class="quotation-box">
            <p><strong>Order #1:</strong> 10 Basic Smartphones - Setup Option A</p>
            <p><strong>Order #2:</strong> 5 Superior Smartphones - Setup Option B</p>
        </div>

        <h3>Get Your Quote</h3>
        <form id="quotationForm">
            <input type="text" id="customerName" placeholder="Customer Name" required>
            <input type="text" id="companyName" placeholder="Company Name" required>
            <input type="text" id="phoneNumber" placeholder="Phone Number" required>
            <input type="number" id="quantity" placeholder="Quantity (must be multiple of 5)" required>
            <select id="smartphoneType" required>
                <option value="" disabled selected>Select Smartphone Type</option>
                <option value="basic">Basic</option>
                <option value="standard">Standard</option>
                <option value="superior">Superior</option>
            </select>
            <select id="setupOption" required>
                <option value="" disabled selected>Select Setup Option</option>
                <option value="optionA">Option A (5 apps for £30)</option>
                <option value="optionB">Option B (10 apps for £50)</option>
            </select>
            <button type="submit">Get Quotation</button>
        </form>
        
        <!-- Quotation Result Display Box -->
        <div class="quotation-result" id="quotation-result" style="display:none;">
            <h3>Quotation Details</h3>
            <div id="quotation-details" style="white-space: pre-line;"></div> <!-- Preserves line breaks -->
            <button id="update-button" style="display:none;">Update Quotation</button> <!-- Update button -->
        </div>
        
        <div class="error-message" id="error-message" style="display:none;"></div>
    </div>
    <footer>
        <p>&copy; 2024 The Phone Shop</p>
    </footer>

    <script>
        document.getElementById('quotationForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent default form submission

            // Get form values
            const customerName = document.getElementById('customerName').value;
            const companyName = document.getElementById('companyName').value;
            const phoneNumber = document.getElementById('phoneNumber').value;
            const quantity = Number(document.getElementById('quantity').value);
            const smartphoneType = document.getElementById('smartphoneType').value;
            const setupOption = document.getElementById('setupOption').value;

            // Validate quantity (must be a multiple of 5)
            if (quantity < 5 || quantity % 5 !== 0) {
                const errorMessage = document.getElementById('error-message');
                errorMessage.textContent = 'Quantity must be at least 5 and a multiple of 5.';
                errorMessage.style.display = 'block';
                return;
            }

            // Calculate prices (example pricing)
            const smartphonePrices = {
                basic: 250,
                standard: 450,
                superior: 950
            };
            const setupPrices = {
                optionA: 30,
                optionB: 50
            };

            const smartphonePrice = smartphonePrices[smartphoneType];
            const setupPrice = setupPrices[setupOption];
            const totalCost = (smartphonePrice * quantity) + setupPrice;
            const vat = totalCost * 0.2; // VAT at 20%
            const totalWithVAT = totalCost + vat;

            // Display quotation result in the box
            const quotationResult = document.getElementById('quotation-result');
            const quotationDetails = document.getElementById('quotation-details');
            quotationDetails.innerHTML = `
                Customer: ${customerName}<br>
                Company: ${companyName}<br>
                Phone Number: ${phoneNumber}<br>
                Quantity: ${quantity}<br>
                Smartphone Type: ${smartphoneType}<br>
                Setup Option: ${setupOption}<br>
                Total Cost: £${totalCost.toFixed(2)}<br>
                VAT: £${vat.toFixed(2)}<br>
                Total Cost Including VAT: £${totalWithVAT.toFixed(2)}
            `;
            quotationResult.style.display = 'block'; // Show the result box

            // Show the update button
            document.getElementById('update-button').style.display = 'inline-block';
        });

        // Event listener for the update button
        document.getElementById('update-button').addEventListener('click', function() {
            // Populate the form with existing values for editing
            const details = document.getElementById('quotation-details').innerText.split('\n').map(line => line.split(': ')[1]);

            document.getElementById('customerName').value = details[0];
            document.getElementById('companyName').value = details[1];
            document.getElementById('phoneNumber').value = details[2];
            document.getElementById('quantity').value = details[3];
            document.getElementById('smartphoneType').value = details[4].toLowerCase();
            document.getElementById('setupOption').value = details[5].toLowerCase();

            // Hide the quotation result box
            document.getElementById('quotation-result').style.display = 'none';
        });
    </script>
</body>
</html>
